<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="timer.css">
    <script src="calendar.js"></script>
    <title>Document</title>
</head>

<body>
    <input type="text" id="datepicker">
    <input type="button" id="timeLimit" value="カウントダウン開始">


    <script>
//        var endDateTime = $("#datepicker").val();

        $("#timeLimit").on('click', function() {
            function countDown() {
                //alert();
                var startDateTime = new Date();
//                var endDateTime = $("#datepicker").val();
                console.log(endDateTime);
                var left = endDateTime - startDateTime;
                var a_day = 24 * 60 * 60 * 1000;
                var a_year = 365 * 24 * 60 * 60 * 1000;
                console.log(endDateTime);

                var y = Math.floor(left / a_year);

                var d = Math.floor((left % a_year) / (24 * 60 * 60 * 1000));

                var h = Math.floor((left % a_day) / (60 * 60 * 1000));

                var m = Math.floor((left % a_day) / (60 * 1000)) % 60;

                var s = Math.floor((left % a_day) / 1000) % 60 % 60;

                $("#TimeLeft").html("あと" + d + '日' + h + '時間' + m + '分' + s + '秒');
                setTimeout(countDown, 1000);
            };
        });
    </script>


</body>

</html>
